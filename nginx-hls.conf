server {
    listen 8000;
    server_name localhost;

    # CORS設定
    add_header Access-Control-Allow-Origin *;
    add_header Access-Control-Allow-Methods 'GET, POST, OPTIONS';
    add_header Access-Control-Allow-Headers 'Range';

    # HLS配信
    location /hls/ {
        alias /var/www/html/hls/;
        
        # HLS特有の設定
        add_header Cache-Control no-cache;
        add_header Access-Control-Allow-Origin *;
        
        # MIME type設定
        location ~* \.m3u8$ {
            add_header Content-Type application/vnd.apple.mpegurl;
        }
        
        location ~* \.(ts|m4s)$ {
            add_header Content-Type video/mp2t;
        }
    }

    # ログ設定
    access_log /var/log/nginx/hls_access.log;
    error_log /var/log/nginx/hls_error.log;
}